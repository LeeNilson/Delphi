unit Ufrm_advinhacao;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.ExtCtrls, Vcl.ExtDlgs,
  Vcl.Imaging.jpeg;

type
  TFrm_Numeros = class(TForm)
    Label1: TLabel;
    Lbl_PrimeiroValor: TLabel;
    Lbl_SegundoValor: TLabel;
    Lbl_Resultado: TLabel;
    Btn_Adivinhar: TButton;
    Btn_NovoGame: TButton;
    Edt_numero: TEdit;
    Rdg_Nivel: TRadioGroup;
    Image1: TImage;
    procedure RadioGroup1Click(Sender: TObject);
    procedure Btn_AdivinharClick(Sender: TObject); // Added event for the "Adivinhar" button
  private
    { Private declarations }
    FNumeroSecreto: Integer; // To store the randomly generated secret number
  public
    ValorMax : Integer; // Changed to Integer as the levels suggest whole numbers
    ValorMin : Integer; // Added ValorMin, assuming the range starts from 1 or 0
    // NumeroJogador : real; // No longer needed as a class variable
  end;

var
  Frm_Numeros: TFrm_Numeros;

implementation

{$R *.dfm}

function GerarNumeroAleatorioInteiro(AMin, AMax: Integer): Integer;
begin
 Randomize;
end;

procedure TFrm_Numeros.Btn_AdivinharClick(Sender: TObject);
var
  NumeroJogador: Integer;
begin
  try
    NumeroJogador := StrToInt(Edt_numero.Text); // Convert the text from the edit box to an Integer
    if NumeroJogador = FNumeroSecreto then
    begin
      Image1.Visible := True;
      Lbl_Resultado.Caption := 'Parabéns! Você acertou!';
    end
    else if NumeroJogador < FNumeroSecreto then
    begin
      Image1.Visible := False;
      Lbl_Resultado.Caption := 'Tente um número maior.';
    end
    else
    begin
      Image1.Visible := False;
      Lbl_Resultado.Caption := 'Tente um número menor.';
    end;
  except
    on E: EConvertError do
      Lbl_Resultado.Caption := 'Por favor, digite um número válido.';
  end;
end;

procedure TFrm_Numeros.RadioGroup1Click(Sender: TObject);
begin
  case Rdg_Nivel.ItemIndex of
    0:
    begin
      ValorMax := 50;
      Lbl_SegundoValor.Caption := '50' ;
    end;
    1:
    begin
      ValorMax := 100;
      Lbl_SegundoValor.Caption := '100';
    end;
    2:
    begin
      ValorMax := 1000;
      Lbl_SegundoValor.Caption := '1000';
    end;
  else
    ValorMax := 50; // Default value in case no level is selected
    Lbl_SegundoValor.Caption := '50';
  end;
  // Generate a new secret number when the level changes
  FNumeroSecreto := GerarNumeroAleatorioInteiro(1, ValorMax);
  Lbl_PrimeiroValor.Caption := '1'; // Assuming the minimum is 1
  Lbl_Resultado.Caption := '';      // Clear any previous result message
  Image1.Visible := False;         // Hide the image at the start of a new level
end;

initialization
  Randomize; // Initialize the random number generator

end.
